<!DOCTYPE html>
<html lang="en" xmlns:th="http://>www.thymeleaf.org/">
<head th:replace="storefragments :: head">
    <meta charset="UTF-8"/>
    <!--<meta name="viewport" content="width=device-width, initial-scale=1"/>-->
    <title>My Store</title>

</head>
<body class="container">
<nav th:replace="storefragments :: navigation"></nav>
<!--<form id="searchForm" action="/store/search" method="get">-->
<form id="searchForm" action="/store/search" method="post">
    <div class="input-group" style="max-width:40%;margin:10px;">
        <!--<input type="text"  class="form-control" th:value="${keyword}"  id="mySearch" onkeyup="javascript:search(this)" placeholder="Search by name, category and brand" style="padding:5px"/>-->
        <input type="text"  class="form-control" name="keyword" placeholder="Search by name, category and brand" style="padding:5px"/>
        <span class="input-group-addon" style="padding:0px;"><button type="submit"  style="height: 32px;border: none;"><i class="glyphicon glyphicon-search"></i></button></span>
    </div>
</form>
<div th:each="keyword : ${keywords}" class="chip">
    <span th:text="${keyword}" /><a class="closebtn" th:href="@{'/store/search/clear/' + ${keyword}}" onclick="this.parentElement.style.display='none'">&times;</a>
</div>
<script>
        function setFocus(){
            var searchInput = document.getElementById('mySearch');
            console.log(searchInput);
            // Multiply by 2 to ensure the cursor always ends up at the end;
            // Opera sometimes sees a carriage return as 2 characters.
            var strLength = searchInput.value.length * 2;

            searchInput.focus();
            searchInput.setSelectionRange(strLength, strLength);
        }

        function search(event){
         console.log(event.value);
         document.getElementById("searchForm").action ='/store/search/'+ event.value;
         document.getElementById("searchForm").submit();
        }
    </script>
<div style="display:flex;flex-wrap: wrap">
    <div th:each="item : ${items}" style="margin:10px">
        <div class="card">
            <a th:href="@{'/store/item/edit/'+${item.id}}">
                <img src="/images/ToorDal.jpg" alt="ToorDal" style="width:180px">
            </a>
            <div class="container1">
                <h5><b th:text="${item.name}"></b></h5>
                <table>
                    <tr>
                        <td>Price:$<span th:text="${item.price}"></span> <span style="margin-left:20px"> Qty:</span><span th:text="${item.quantity}"></span></td>
                    </tr>
                    <tr>
                        <td th:if="${item.brand}">Brand: <span th:text="${item.brand.name}"></span></td>
                    </tr>
                    <tr>
                        <td th:if="${item.category}">Category: <span th:text="${item.category.name}"></span></td>
                    </tr>
                </table>
            </div>
        </div>
    </div>
</div>

</body>
</html>